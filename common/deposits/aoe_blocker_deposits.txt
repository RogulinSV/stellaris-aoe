### Dry planets

d_melted_streams = {
    icon = "d_melted_streams"
    time = 300

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 400
            minerals = 200
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_growth_speed = -0.02
        pop_growth_from_immigration = -0.02
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { alloys = 50 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { alloys = 100 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { alloys = 150 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { alloys = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { alloys = 250 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_arid
        }
        modifier = {
            factor = 2
            has_planet_modifier = "pm_unstable_tectonics"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_molten"
    }
}

d_melted_rivers = {
    icon = "d_melted_rivers"
    time = 500

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 600
            minerals = 300
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_growth_speed = -0.04
        pop_growth_from_immigration = -0.04
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { alloys = 100 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { alloys = 150 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { alloys = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { alloys = 250 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { alloys = 300 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_arid
        }
        modifier = {
            factor = 2
            has_planet_modifier = "pm_unstable_tectonics"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_molten"
    }
}

d_magmatic_lakes = {
    icon = "d_magmatic_lakes"
    time = 700

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_lichen_fields
    }

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 800
            minerals = 400
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_growth_speed = -0.06
        pop_growth_from_immigration = -0.06
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { alloys = 150 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { alloys = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { alloys = 250 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { alloys = 300 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { alloys = 350 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_arid
        }
        modifier = {
            factor = 2
            has_planet_modifier = "pm_unstable_tectonics"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_molten"
    }
}

d_magmatic_oceans = {
    icon = "d_magmatic_oceans"
    time = 900

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_lichen_fields
        d_bountiful_plains
    }

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 1200
            minerals = 600
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_growth_speed = -0.08
        pop_growth_from_immigration = -0.08
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { alloys = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { alloys = 250 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { alloys = 300 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { alloys = 350 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { alloys = 400 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_arid
        }
        modifier = {
            factor = 2
            has_planet_modifier = "pm_unstable_tectonics"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_molten"
    }
}

d_magmatic_rifts = {
    icon = "d_planetary_rifts"
    time = 1300

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_crystallized_caves
        d_metallized_caves
    }

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 2200
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        planet_building_build_speed_mult = -0.15
        planet_buildings_cost_mult = 0.15
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = {
                    add_resource = {
                        alloys = 80
                        consumer_goods = 40
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = {
                    add_resource = {
                        consumer_goods = 160
                        consumer_goods = 80
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = {
                    add_resource = {
                        consumer_goods = 240
                        consumer_goods = 120
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = {
                    add_resource = {
                        consumer_goods = 320
                        consumer_goods = 160
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = {
                    add_resource = {
                        consumer_goods = 400
                        consumer_goods = 200
                    }
                }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_arid
        }
        modifier = {
            factor = 1.35
            has_planet_modifier = "pm_chthonian_planet"
        }
        modifier = {
            factor = 2
            has_planet_modifier = "pm_unstable_tectonics"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_leveling_rifts"
    }
}

d_sandy_marshes = {
    icon = "d_sandy_marshes"
    time = 330

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 400
            minerals = 200
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        planet_buildings_cost_mult = 0.05
        pop_growth_from_immigration = -0.05
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { consumer_goods = 10 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { consumer_goods = 20 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { consumer_goods = 30 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { consumer_goods = 40 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { consumer_goods = 50 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 0.5
            is_planet_class = pc_savannah
        }
        modifier = {
            factor = 1.25
            is_planet_class = pc_desert
        }
        modifier = {
            factor = 1.25
            has_planet_modifier = "pm_wild_storms"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_wasteland"
    }
}

d_scorched_plains = {
    icon = "d_scorched_plains"
    time = 900

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_crystallized_hills
    }

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 900
            minerals = 600
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        planet_buildings_cost_mult = 0.15
        pop_growth_from_immigration = -0.15
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { consumer_goods = 30 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { consumer_goods = 60 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { consumer_goods = 90 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { consumer_goods = 120 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { consumer_goods = 150 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_savannah
        }
        modifier = {
            factor = 1.45
            has_planet_modifier = "pm_hazardous_weather"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_wasteland"
    }
}

d_isolated_wastelands = {
    icon = "d_isolated_wastelands"
    time = 720

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_dry = yes
            is_planet_class = pc_continental
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 700
            minerals = 400
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        planet_buildings_cost_mult = 0.1
        pop_growth_from_immigration = -0.1
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { consumer_goods = 30 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { consumer_goods = 60 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { consumer_goods = 90 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = { add_resource = { consumer_goods = 120 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { consumer_goods = 150 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 0.5
            is_planet_class = pc_continental
        }
        modifier = {
            factor = 1.25
            is_planet_class = pc_savannah
        }
        modifier = {
            factor = 1.25
            has_planet_modifier = "pm_hazardous_weather"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_wasteland"
    }
}

d_sand_worms = {
    icon = "d_sand_worms"
    time = 900

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_crystallized_caves
        d_metallized_caves
    }

    potential = {
        planet_size >= 10
        is_dry = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 600
            minerals = 900
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        planet_building_build_speed_mult = -0.15
        planet_buildings_cost_mult = 0.15
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_1"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 100 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_2"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_3"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 300 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_4"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 400 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_5"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 500 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight

        modifier = {
            factor = 1.25
            is_planet_class = pc_desert
        }
        modifier = {
            factor = 1.55
            has_planet_modifier = "pm_dangerous_wildlife"
        }
        modifier = {
            factor = 2.25
            has_planet_modifier = "pm_titanic_life"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_eradication_sand_worms"
    }
}

### Wet planets

d_impassable_woodlands = {
    icon = "d_impassable_woodlands"
    time = 360

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_rugged_woods
    }

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 400
            minerals = 200
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        planet_crime_add = 1
        planet_farmers_food_produces_mult = -0.02
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 50 }
                    }
                    add_resource = { consumer_goods = 20 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 100 }
                    }
                    add_resource = { consumer_goods = 40 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 150 }
                    }
                    add_resource = { consumer_goods = 60 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 200 }
                    }
                    add_resource = { consumer_goods = 80 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 250 }
                    }
                    add_resource = { consumer_goods = 100 }
                }
            }
        }
    }

    drop_weight = {
        weight = @blocker_high_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 1.5
            has_planet_modifier = "pm_lush"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_floral"
    }
}

d_untouched_woodlands = {
    icon = "d_untouched_woodlands"
    time = 720

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_rugged_woods
        d_lush_jungle
    }

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 800
            minerals = 400
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        planet_crime_add = 2
        planet_farmers_food_produces_mult = -0.04
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 50 }
                    }
                    add_resource = { consumer_goods = 20 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 100 }
                    }
                    add_resource = { consumer_goods = 40 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 150 }
                    }
                    add_resource = { consumer_goods = 60 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" } 
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 200 }
                    }
                    add_resource = { consumer_goods = 80 }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = {
                    if = {
                        limit = { is_regular_empire = yes }
                        add_resource = { food = 250 }
                    }
                    add_resource = { consumer_goods = 100 }
                }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 1.45
            has_planet_modifier = "pm_lush"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_floral"
    }
}

d_impassable_marshes = {
    icon = "d_impassable_marshes"
    time = 480

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_boggy_fens
    }

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 480
            minerals = 360
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        planet_crime_add = 2
        planet_farmers_food_produces_mult = -0.03
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_1"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 100 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_2"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 150 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_3"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_4"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 250 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_5"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 250 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 1.45
            has_planet_modifier = "pm_lush"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_floral"
    }
}

d_untouched_marshes = {
    icon = "d_untouched_marshes"
    time = 960

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_boggy_fens
        d_lush_jungle
    }

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 960
            minerals = 720
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        planet_crime_add = 3
        planet_farmers_food_produces_mult = -0.06
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_1"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 100 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_2"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_3"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 300 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_4"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 400 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_5"
                        is_regular_empire = yes
                    }
                }
                owner = { add_resource = { food = 500 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 1.25
            has_planet_modifier = "pm_lush"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_floral"
    }
}

d_serpentard_colonies = {
    icon = "d_serpentard_colonies"
    time = 650

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 500
            minerals = 500
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        planet_miners_minerals_produces_mult = -0.03
        pop_growth_speed = -0.03
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { consumer_goods = 50 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { consumer_goods = 100 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { consumer_goods = 150 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" }
                }
                owner = { add_resource = { consumer_goods = 200 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { consumer_goods = 250 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 1.35
            has_planet_modifier = "pm_dangerous_wildlife"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_disinsection_parasitic"
    }
}

d_stalagmite_plains = {
    icon = "d_stalagmite_plains"
    time = 700

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_crystallized_plains
    }

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 700
            minerals = 400
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        pop_housing_usage_mult = -0.1
        planet_chemists_produces_mult = -0.1
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { alloys = 30 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { alloys = 60 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { alloys = 90 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" }
                }
                owner = { add_resource = { alloys = 120 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { alloys = 150 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 1.25
            is_moon = yes
        }
        modifier = {
            factor = 1.15
            has_moon = yes
            num_moons > 1
        }
        modifier = {
            factor = 1.25
            has_moon = yes
            num_moons > 2
        }
        modifier = {
            factor = 1.55
            has_moon = yes
            num_moons > 3
        }
        modifier = {
            factor = 1.45
            has_planet_modifier = "pm_extensive_moon_system"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_leveling_stalagmites"
    }
}

d_carbon_pillars = {
    icon = "d_carbon_pillars"
    time = 500

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 500
            minerals = 200
        }
    }

    planet_modifier = {
        planet_max_districts_add = -1
        planet_chemists_produces_mult = -0.03
        planet_farmers_produces_mult = -0.03
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_1" }
                }
                owner = { add_resource = { consumer_goods = 20 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_2" }
                }
                owner = { add_resource = { consumer_goods = 40 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_3" }
                }
                owner = { add_resource = { consumer_goods = 60 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_4" }
                }
                owner = { add_resource = { consumer_goods = 80 } }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = { has_technology = "tech_environment_utilization_5" }
                }
                owner = { add_resource = { consumer_goods = 100 } }
            }
        }
    }

    drop_weight = {
        weight = @blocker_ultralow_drop_weight

        modifier = {
            factor = 0.25
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 5
            has_planet_modifier = "pm_carbon_world"
        }
        modifier = {
            factor = 1.25
            has_planet_modifier = "pm_low_gravity"
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_carbon"
    }
}

### Ocean planet

d_electric_maelstroms = {
    icon = d_electric_maelstroms
    time = 490

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        is_wet = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 1000
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_happiness = -0.03
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_2"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 1250
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_3"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 1500
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_4"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 1750
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_5"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 2000
                    }
                }
            }
        }
    }

    drop_weight = {
        weight = @blocker_high_drop_weight
        modifier = {
            factor = 0.25
            NOT = {
                is_planet_class = pc_ocean
            }
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_aquatic"
    }
}

d_ravenous_maelstroms = {
    icon = d_ravenous_maelstroms
    time = 980

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_teeming_reef
    }

    potential = {
        planet_size >= 10
        is_wet = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 2000
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_happiness = -0.06
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_2"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 2300
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_3"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 2600
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_4"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 2900
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_5"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 3200
                    }
                }
            }
        }
    }

    drop_weight = {
        weight = @blocker_medium_drop_weight
        modifier = {
            factor = 0.25
            NOT = {
                is_planet_class = pc_ocean
            }
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_aquatic"
    }
}

d_giant_tides = {
    icon = d_giant_tides
    time = 1340

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        is_wet = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 3000
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_happiness = -0.09
    }

    on_cleared = {
        hidden_effect = {
            if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_2"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 3300
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_3"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 3500
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_4"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 3700
                    }
                }
            }
            else_if = {
                limit = {
                    exists = owner
                    owner = {
                        has_technology = "tech_environment_utilization_5"
                    }
                }
                owner = {
                    add_resource = {
                        energy = 3900
                    }
                }
            }
        }
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 0.25
            NOT = {
                is_planet_class = pc_ocean
            }
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_utilization_aquatic"
    }
}

d_arachnid_colonies = {
    icon = d_arachnid_colonies
    time = 1000

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_planet_class = pc_continental
            is_planet_class = pc_tropical
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 1100
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 2
            is_planet_class = pc_tropical
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    # prerequisites = { "tech_dense_jungle" }
}

d_slug_colonies = {
    icon = d_slug_colonies
    time = 1000

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_planet_class = pc_continental
            is_planet_class = pc_ocean
            is_planet_class = pc_tropical
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 750
            minerals = 750
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 2
            is_planet_class = pc_tropical
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    # prerequisites = { "tech_dense_jungle" }
}

d_daedra_colonies = {
    icon = d_daedra_colonies
    time = 1000

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_planet_class = pc_alpine
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 1500
            minerals = 500
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 2
            is_planet_class = pc_tropical
        }
        modifier = {
            factor = 2
            is_planet_class = pc_alpine
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    # prerequisites = { "tech_dense_jungle" }
}

d_water_worms = {
    icon = d_water_worms
    time = 1000

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        OR = {
            is_wet = yes
            is_cold = yes
            is_planet_class = pc_gaia
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 1000
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 2
            is_planet_class = pc_ocean
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    # prerequisites = { "tech_dense_jungle" }
}

d_frozen_gas_geysers = {
    icon = d_frozen_gas_geysers
    time = 1000

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    potential = {
        planet_size >= 10
        is_cold = yes
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 1500
            minerals = 500
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 2
            is_planet_class = pc_arctic
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    # prerequisites = { "tech_dense_jungle" }
}

d_parasitic_bioplasm = {
    icon = d_parasitic_bioplasm
    time = 750

    is_for_colonizeable = yes
    category = deposit_cat_blockers

    blocker_swap_types = {
        d_crystallized_mines
    }

    potential = {
        planet_size >= 10
        OR = {
            is_cold = yes
            is_planet_class = pc_nuked
        }
    }

    resources = {
        category = deposit_blockers
        cost = {
            energy = 500
            minerals = 800
        }
    }

    planet_modifier = { 
        planet_max_districts_add = -1
        pop_growth_from_immigration = -0.05
        planet_immigration_pull_mult = 0.05
    }

    drop_weight = {
        weight = @blocker_low_drop_weight
        modifier = {
            factor = 0.25
            is_planet_class = pc_arctic
        }
        modifier = {
            factor = 0
            num_free_districts = {
                type = district_city
                value < 2
            }
        }
    }

    ai_weight = {
        weight = 1
    }

    prerequisites = {
        "tech_environment_disinsection_parasitic"
    }
}