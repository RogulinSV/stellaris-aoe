special_project = {
    key = "aoe_replicant_leader_appearance_admiral_project"
    cost = 0
    days_to_research = 30
    timelimit = 300
    picture = GFX_aoe_replicant_leader_appearance_project
    icon = "gfx/interface/icons/situation_log/situation_log_ship.dds"

    event_scope = ship_event

    requirements = {
        shipclass_military = 1
        leader = admiral
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    # Prev: country
    abort_trigger = {
        NOT = {
            exists = event_target:replicant_leader
        }
    }

    # Scope: ship
    # From: disabled ship
    # Prev: ship
    on_success = {
        from = {
            random_list = {
                10 = {
                    modifier = {
                        factor = 0.8
                        event_target:replicant_leader = {
                            has_level = 2
                        }
                    }
                    modifier = {
                        factor = 0.6
                        event_target:replicant_leader = {
                            has_level = 3
                        }
                    }
                    modifier = {
                        factor = 0.4
                        event_target:replicant_leader = {
                            has_level = 4
                        }
                    }
                    modifier = {
                        factor = 0.2
                        event_target:replicant_leader = {
                            has_level >= 5
                        }
                    }
                    fleet = {
                        set_event_locked = no
                    }
                    owner = {
                        country_event = {
                            id = aoe_pirate_actions.2
                        }
                    }
                }
                10 = {
                    owner = {
                        country_event = {
                            id = aoe_pirate_actions.3
                            days = 600
                            random = 300
                        }
                    }
                    fleet = {
                        set_event_locked = no
                        destroy_fleet = this
                    }
                }
            }
        }
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    # Prev: country
    on_fail = {
        fromfrom = {
            owner = {
                country_event = {
                    id = aoe_pirate_actions.3
                    days = 300
                    random = 150
                }
            }
            fleet = {
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    on_cancel = {
        fromfrom = {
            owner = {
                country_event = {
                    id = aoe_pirate_actions.3
                    days = 300
                    random = 150
                }
            }
            fleet = {
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }
}

special_project = {
    key = "aoe_replicant_leader_appearance_general_project"
    cost = 0
    days_to_research = 30
    timelimit = 300
    picture = GFX_aoe_replicant_leader_appearance_project
    icon = "gfx/interface/icons/situation_log/situation_log_ship.dds"

    event_scope = ship_event

    requirements = {
        shipclass_transport = 1
        leader = general
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    # Prev: country
    abort_trigger = {
        NOT = {
            exists = event_target:replicant_leader
        }
    }

    # Scope: ship
    # From: disabled ship
    # Prev: ship
    on_success = {
        from = {
            random_list = {
                10 = {
                    modifier = {
                        factor = 0.8
                        event_target:replicant_leader = {
                            has_level = 2
                        }
                    }
                    modifier = {
                        factor = 0.6
                        event_target:replicant_leader = {
                            has_level = 3
                        }
                    }
                    modifier = {
                        factor = 0.4
                        event_target:replicant_leader = {
                            has_level = 4
                        }
                    }
                    modifier = {
                        factor = 0.2
                        event_target:replicant_leader = {
                            has_level >= 5
                        }
                    }
                    fleet = {
                        set_event_locked = no
                    }
                    owner = {
                        country_event = {
                            id = aoe_pirate_actions.2
                        }
                    }
                }
                10 = {
                    owner = {
                        country_event = {
                            id = aoe_pirate_actions.3
                            days = 600
                            random = 300
                        }
                    }
                    fleet = {
                        set_event_locked = no
                        destroy_fleet = this
                    }
                }
            }
        }
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    # Prev: country
    on_fail = {
        fromfrom = {
            owner = {
                country_event = {
                    id = aoe_pirate_actions.3
                    days = 300
                    random = 150
                }
            }
            fleet = {
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    on_cancel = {
        fromfrom = {
            owner = {
                country_event = {
                    id = aoe_pirate_actions.3
                    days = 300
                    random = 150
                }
            }
            fleet = {
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }
}

special_project = {
    key = "aoe_replicant_leader_appearance_scientist_project"
    cost = 0
    days_to_research = 30
    timelimit = 300
    picture = GFX_aoe_replicant_leader_appearance_project
    icon = "gfx/interface/icons/situation_log/situation_log_ship.dds"

    event_scope = ship_event

    requirements = {
        shipclass_science_ship = 1
        leader = scientist
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    # Prev: country
    abort_trigger = {
        NOT = {
            exists = event_target:replicant_leader
        }
    }

    # Scope: ship
    # From: disabled ship
    # Prev: ship
    on_success = {
        from = {
            random_list = {
                10 = {
                    modifier = {
                        factor = 0.8
                        event_target:replicant_leader = {
                            has_level = 2
                        }
                    }
                    modifier = {
                        factor = 0.6
                        event_target:replicant_leader = {
                            has_level = 3
                        }
                    }
                    modifier = {
                        factor = 0.4
                        event_target:replicant_leader = {
                            has_level = 4
                        }
                    }
                    modifier = {
                        factor = 0.2
                        event_target:replicant_leader = {
                            has_level >= 5
                        }
                    }
                    fleet = {
                        set_event_locked = no
                    }
                    owner = {
                        country_event = {
                            id = aoe_pirate_actions.2
                        }
                    }
                }
                10 = {
                    owner = {
                        country_event = {
                            id = aoe_pirate_actions.3
                            days = 600
                            random = 300
                        }
                    }
                    fleet = {
                        set_event_locked = no
                        destroy_fleet = this
                    }
                }
            }
        }
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    # Prev: country
    on_fail = {
        fromfrom = {
            owner = {
                country_event = {
                    id = aoe_pirate_actions.3
                    days = 300
                    random = 150
                }
            }
            fleet = {
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }

    # Scope: country
    # From: fleet
    # FromFrom: ship
    on_cancel = {
        fromfrom = {
            owner = {
                country_event = {
                    id = aoe_pirate_actions.3
                    days = 300
                    random = 150
                }
            }
            fleet = {
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }
}

special_project = {
    key = "aoe_replicant_leader_rescue_admiral_project"
    cost = 0
    days_to_research = 30
    timelimit = 500
    picture = GFX_aoe_replicant_leader_rescue_admiral_project
    icon = "gfx/interface/icons/situation_log/situation_log_ship.dds"

    event_scope = ship_event

    requirements = {
        shipclass_transport = 3
        leader = general
    }

    # Scope: country
    # From: disabled ship
    # FromFrom: ship
    # Prev: country
    abort_trigger = {
        always = no
    }

    # Scope: ship
    # From: disabled ship
    # Prev: ship
    on_success = {
        owner = {
            country_event = {
                id = aoe_pirate_actions.31
            }
        }
    }

    # Scope: country
    # From: disabled ship
    # FromFrom: ship
    # Prev: country
    on_fail = {
        from = {
            set_disabled = no
            fleet = {
                if = {
                    limit = {
                        exists = leader
                    }
                    leader = {
                        kill_leader = {
                            show_notification = no
                        }
                    }
                }
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }

    # Scope: country
    # From: disabled ship
    on_cancel = {
        from = {
            set_disabled = no
            fleet = {
                if = {
                    limit = {
                        exists = leader
                    }
                    leader = {
                        kill_leader = {
                            show_notification = no
                        }
                    }
                }
                set_event_locked = no
                destroy_fleet = this
            }
        }
    }
}

special_project = {
    key = "aoe_replicant_leader_rescue_general_project"
    cost = 700
    tech_department = society_technology
    timelimit = 100
    picture = GFX_aoe_replicant_leader_rescue_general_project
    icon = "gfx/interface/icons/situation_log/situation_log_planet.dds"

    event_scope = planet_event

    # Scope: country
    # From: planet
    abort_trigger = {
        NOT = {
            from = {
                any_owned_pop = {
                    has_pop_flag = "replicant_leader"
                }
            }
        }
    }

    # Scope: planet
    # FromFromFrom: country
    on_success = {
        owner = {
            country_event = {
                id = aoe_pirate_actions.32
            }
        }
    }

    # Scope: country
    # From: planet
    on_fail = {
        country_event = {
            id = aoe_pirate_actions.33
        }
    }

    # Scope: country
    # From: planet
    on_cancel = {
        country_event = {
            id = aoe_pirate_actions.33
        }
    }
}