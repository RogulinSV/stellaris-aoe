### Ecology adaptation

tech_environment_utilization_1 = {
    cost = @technology_ultralow_cost
    area = society
    tier = 1
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier1weight2

    prereqfor_desc = {
        feature = {
            title = "tech_environment_utilization_1_title"
            desc = "tech_environment_utilization_1_desc"
        }
    }

    potential = {
        OR = {
            is_machine_empire = no
            has_civic = "civic_machine_assimilator"
            has_civic = "civic_machine_servitor"
        }
        OR = {
            has_country_flag = "flags_aoe_science_ascension"
            has_global_flag = "flags_aoe_science_ascension"
        }
    }

    modifier = {
        pop_environment_tolerance = 0.05
        planet_colony_development_speed_mult = 0.10
    }

    weight_modifier = {
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_adopt"
            }
        }
        modifier = {
            factor = 1.3
            has_valid_civic = "civic_gospel_of_the_masses"
        }
        modifier = {
            factor = 1.3
            OR = {
                has_authority = "auth_oligarchic"
                has_authority = "auth_corporate"
            }
        }
        modifier = {
            factor = 4
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0.9
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.35
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0.9
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_adopt"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }
}

tech_environment_utilization_2 = {
    cost = @technology_low_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_environment_utilization_1"
        "tech_colonization_2"
    }
    weight = @tier2weight2

    prereqfor_desc = {
        feature = {
            title = "tech_environment_utilization_2_title"
            desc = "tech_environment_utilization_2_desc"
        }
    }

    potential = {
        OR = {
            is_machine_empire = no
            has_civic = "civic_machine_assimilator"
            has_civic = "civic_machine_servitor"
        }
        OR = {
            has_country_flag = "flags_aoe_science_ascension"
            has_global_flag = "flags_aoe_science_ascension"
        }
    }

    modifier = {
        pop_environment_tolerance = 0.05
        planet_colony_development_speed_mult = 0.10
    }

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                has_tradition = "tr_expansion_colonization_fever"
                has_tradition = "tr_expansion_reach_for_the_stars"
            }
        }
        modifier = {
            factor = 1.2
            has_valid_civic = "civic_gospel_of_the_masses"
        }
        modifier = {
            factor = 1.2
            OR = {
                has_authority = "auth_oligarchic"
                has_authority = "auth_corporate"
            }
        }
        modifier = {
            factor = 3
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0.8
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 3
        }
    }

    ai_weight = {
        modifier = {
            factor = 0.8
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0
            NOR = {
                has_tradition = "tr_expansion_colonization_fever"
                has_tradition = "tr_expansion_reach_for_the_stars"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 3
        }
    }
}

tech_environment_utilization_3 = {
    cost = @technology_medium_cost
    area = society
    tier = 3
    is_rare = yes
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_environment_utilization_2"
        "tech_colonization_3"
    }
    weight = @tier3weight2

    prereqfor_desc = {
        feature = {
            title = "tech_environment_utilization_3_title"
            desc = "tech_environment_utilization_3_desc"
        }
    }

    potential = {
        OR = {
            is_machine_empire = no
            has_civic = "civic_machine_assimilator"
            has_civic = "civic_machine_servitor"
        }
        OR = {
            has_country_flag = "flags_aoe_science_ascension"
            has_global_flag = "flags_aoe_science_ascension"
        }
    }

    modifier = {
        pop_environment_tolerance = 0.05
        planet_colony_development_speed_mult = 0.10
    }

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                has_tradition = "tr_expansion_a_new_life"
                has_tradition = "tr_expansion_courier_network"
            }
        }
        modifier = {
            factor = 1.1
            has_valid_civic = "civic_gospel_of_the_masses"
        }
        modifier = {
            factor = 1.1
            OR = {
                has_authority = "auth_oligarchic"
                has_authority = "auth_corporate"
            }
        }
        modifier = {
            factor = 2
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0.7
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.8
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 3
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 4
        }
    }

    ai_weight = {
        modifier = {
            factor = 0.7
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.8
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 3
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0
            NOR = {
                has_tradition = "tr_expansion_a_new_life"
                has_tradition = "tr_expansion_courier_network"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 4
        }
    }
}

tech_environment_utilization_4 = {
    cost = @technology_high_cost
    area = society
    tier = 4
    is_rare = yes
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_environment_utilization_3"
        "tech_colonization_4"
    }
    weight = @tier4weight2

    prereqfor_desc = {
        feature = {
            title = "tech_environment_utilization_4_title"
            desc = "tech_environment_utilization_4_desc"
        }
    }

    potential = {
        OR = {
            is_machine_empire = no
            has_civic = "civic_machine_assimilator"
            has_civic = "civic_machine_servitor"
        }
        OR = {
            has_country_flag = "flags_aoe_science_ascension"
            has_global_flag = "flags_aoe_science_ascension"
        }
    }

    modifier = {
        pop_environment_tolerance = 0.05
        planet_colony_development_speed_mult = 0.10
    }

    weight_modifier = {
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_finish"
            }
        }
        modifier = {
            factor = 0.6
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.7
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.8
            research_leader = {
                area = society
                has_level < 3
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 4
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 5
        }
    }

    ai_weight = {
        modifier = {
            factor = 0.6
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.7
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.8
            research_leader = {
                area = society
                has_level < 3
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 4
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_finish"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 5
        }
    }
}

tech_environment_utilization_5 = {
    cost = @technology_ultrahigh_cost
    area = society
    tier = 5
    is_rare = yes
    is_dangerous = yes
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_environment_utilization_4"
        "tech_colonization_5"
    }
    weight = @tier5weight2

    prereqfor_desc = {
        feature = {
            title = "tech_environment_utilization_5_title"
            desc = "tech_environment_utilization_5_desc"
        }
    }

    potential = {
        OR = {
            is_machine_empire = no
            has_civic = "civic_machine_assimilator"
            has_civic = "civic_machine_servitor"
        }
        OR = {
            has_country_flag = "flags_aoe_science_ascension"
            has_global_flag = "flags_aoe_science_ascension"
        }
    }

    modifier = {
        pop_environment_tolerance = 0.05
        planet_colony_development_speed_mult = 0.10
    }

    weight_modifier = {
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_mastery_of_nature"
            }
        }
        modifier = {
            factor = 0.5
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.6
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.7
            research_leader = {
                area = society
                has_level < 3
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.8
            research_leader = {
                area = society
                has_level < 4
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 5
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 6
        }
    }

    ai_weight = {
        modifier = {
            factor = 0.5
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 0.6
            research_leader = {
                area = society
                has_level < 2
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.7
            research_leader = {
                area = society
                has_level < 3
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.8
            research_leader = {
                area = society
                has_level < 4
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0.9
            research_leader = {
                area = society
                has_level < 5
                NOT = {
                    has_trait = "leader_trait_expertise_new_worlds"
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_mastery_of_nature"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 6
        }
    }
}

### Removing blockers

tech_environment_utilization_molten = {
    cost = @technology_ultralow_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight1

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.2
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.3
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.4
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.5
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_adopt"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_colonization_fever"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_a_new_life"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 4
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_melted_streams"
                }
                any_owned_planet = {
                    has_deposit = "d_melted_rivers"
                }
                any_owned_planet = {
                    has_deposit = "d_magmatic_lakes"
                }
                any_owned_planet = {
                    has_deposit = "d_magmatic_oceans"
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_melted_streams"
                }
                any_owned_planet = {
                    has_deposit = "d_melted_rivers"
                }
                any_owned_planet = {
                    has_deposit = "d_magmatic_lakes"
                }
                any_owned_planet = {
                    has_deposit = "d_magmatic_oceans"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_utilization_floral = {
    cost = @technology_ultralow_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight1

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.2
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.3
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.4
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.5
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_adopt"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_colonization_fever"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_a_new_life"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 4
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_impassable_woodlands"
                }
                any_owned_planet = {
                    has_deposit = "d_untouched_woodlands"
                }
                any_owned_planet = {
                    has_deposit = "d_impassable_marshes"
                }
                any_owned_planet = {
                    has_deposit = "d_untouched_marshes"
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_impassable_woodlands"
                }
                any_owned_planet = {
                    has_deposit = "d_untouched_woodlands"
                }
                any_owned_planet = {
                    has_deposit = "d_impassable_marshes"
                }
                any_owned_planet = {
                    has_deposit = "d_untouched_marshes"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_utilization_aquatic = {
    cost = @technology_ultralow_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight1

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.2
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.3
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.4
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.5
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_adopt"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_colonization_fever"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_a_new_life"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 4
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_electric_maelstroms"
                }
                any_owned_planet = {
                    has_deposit = "d_ravenous_maelstroms"
                }
                any_owned_planet = {
                    has_deposit = "d_giant_tides"
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_electric_maelstroms"
                }
                any_owned_planet = {
                    has_deposit = "d_ravenous_maelstroms"
                }
                any_owned_planet = {
                    has_deposit = "d_giant_tides"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_utilization_wasteland = {
    cost = @technology_ultralow_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight1

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.2
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.3
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.4
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.5
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_adopt"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_colonization_fever"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_a_new_life"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 4
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_sandy_marshes"
                }
                any_owned_planet = {
                    has_deposit = "d_scorched_plains"
                }
                any_owned_planet = {
                    has_deposit = "d_isolated_wastelands"
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_sandy_marshes"
                }
                any_owned_planet = {
                    has_deposit = "d_scorched_plains"
                }
                any_owned_planet = {
                    has_deposit = "d_isolated_wastelands"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_utilization_carbon = {
    cost = @technology_ultralow_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight1

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.2
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.3
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.4
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.5
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_adopt"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_colonization_fever"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_a_new_life"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 4
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_carbon_pillars"
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_carbon_pillars"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_leveling_rifts = {
    cost = @technology_low_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight3

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 3
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_magmatic_rifts"
                }
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_magmatic_rifts"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_leveling_stalagmites = {
    cost = @technology_low_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight2

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 3
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_stalagmite_plains"
                }
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_new_worlds"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_stalagmite_plains"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_eradication_sand_worms = {
    cost = @technology_low_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight3

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 3
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_sand_worms"
                }
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOT = {
                any_owned_planet = {
                    has_deposit = "d_sand_worms"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}

tech_environment_disinsection_parasitic = {
    cost = @technology_low_cost
    area = society
    tier = 2
    is_rare = no
    is_dangerous = no
    is_reverse_engineerable = no
    category = { new_worlds }
    prerequisites = {
        "tech_colonization_1"
    }
    weight = @tier2weight3

    weight_groups = {
        deposit_blockers
    }
    mod_weight_if_group_picked = {
        deposit_blockers = 0.5
    }

    weight_modifier = {
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_1"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_2"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_3"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_4"
        }
        modifier = {
            factor = 1.1
            has_technology = "tech_environment_utilization_5"
        }
        modifier = {
            factor = 3
            has_ascension_perk = "ap_mastery_of_nature"
        }
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_parasitic_bioplasm"
                }
                any_owned_planet = {
                    has_deposit = "d_serpentard_colonies"
                }
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 1
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 2
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 3
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 1.15
            research_leader = {
                area = society
                has_level > 4
                has_trait = "leader_trait_expertise_biology"
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
    }

    ai_weight = {
        modifier = {
            factor = 0
            NOR = {
                any_owned_planet = {
                    has_deposit = "d_parasitic_bioplasm"
                }
                any_owned_planet = {
                    has_deposit = "d_serpentard_colonies"
                }
            }
        }
        modifier = {
            factor = 0
            num_owned_planets < 2
        }
        modifier = {
            factor = 0.75
            has_valid_civic = "civic_environmentalist"
        }
    }
}