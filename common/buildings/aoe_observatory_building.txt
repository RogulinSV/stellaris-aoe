building_observatory_1 = {
    capital = no
    can_build = yes
    can_demolish = yes
    can_be_ruined = yes
    can_be_disabled = yes
    base_buildtime = 360
    base_cap_amount = 1
    category = research

    upgrades = {
        "building_observatory_2"
    }

    potential = {
        is_colonizeable_planet = yes
        has_upgraded_capital = yes
    }

    show_tech_unlock_if = {
        OR = {
            is_regular_empire = yes
            is_machine_empire = yes
            is_hive_empire = yes
        }
    }

    allow = {
        is_sovereign_colony = yes
    }

    resources = {
        category = planet_buildings
        cost = {
            minerals = 500
            energy = 500
            alloys = 250
        }
        upkeep = {
            energy = 3
            minerals = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    NOT = {
                        has_deficit = energy
                        has_deficit = minerals
                    }
                }
            }
            engineering_research = 1
            physics_research = 1
        }
    }

    planet_modifier = {
        planet_researchers_produces_mult = 0.1
    }

    country_modifier = {
        country_influence_produces_mult = 0.02
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire = no
            }
        }
        modifier = {
            job_astronomer_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire = no
            }
        }
        text = "job_astronomer_effect_desc"
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        modifier = {
            job_astronomer_drone_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = "job_astronomer_drone_effect_desc"
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_astronomer_calculator_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        text = "job_astronomer_calculator_effect_desc"
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_astronomer_brain_drone_add = 2
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        text = "job_astronomer_brain_drone_effect_desc"
    }

    ai_weight = {
        weight = 2

        modifier = {
            factor = 1.1
            owner = {
                has_ethic = "ethic_materialist"
            }
        }
        modifier = {
            factor = 1.2
            owner = {
                has_ethic = "ethic_fanatic_materialist"
            }
        }
        modifier = {
            factor = 1.3
            owner = {
                has_civic = "civic_technocracy"
            }
        }
        modifier = {
            factor = 0.9
            owner = {
                has_ethic = "ethic_spiritualist"
            }
        }
        modifier = {
            factor = 0.8
            owner = {
                has_ethic = "ethic_fanatic_spiritualist"
            }
        }
        modifier = {
            factor = 0.5
            owner = {
                has_civic = "civic_agrarian_idyll"
            }
        }
        modifier = {
            factor = 1.1
            owner = {
                has_tradition = "tr_discovery_adopt"
            }
        }
        modifier = {
            factor = 1.2
            owner = {
                OR = {
                    has_tradition = "tr_discovery_to_boldly_go"
                    has_tradition = "tr_discovery_science_division"
                }
            }
        }
        modifier = {
            factor = 1.3
            owner = {
                OR = {
                    has_tradition = "tr_discovery_databank_uplinks"
                    has_tradition = "tr_discovery_polytechnic_education"
                }
            }
        }
        modifier = {
            factor = 1.4
            owner = {
                has_tradition = "tr_discovery_faith_in_science"
            }
        }
        modifier = {
            factor = 1.5
            owner = {
                has_tradition = "tr_discovery_finish"
            }
        }
        modifier = {
            factor = 0
            owner = {
                has_monthly_income = {
                    resource = energy
                    value < 4
                }
            }
        }
        modifier = {
            factor = 0
            owner = {
                has_monthly_income = {
                    resource = minerals
                    value < 2
                }
            }
        }
    }

    prerequisites = {
        "tech_deep_space_survey"
    }
}

building_observatory_2 = {
    capital = no
    can_build = no
    can_demolish = yes
    can_be_ruined = yes
    can_be_disabled = yes
    base_buildtime = 720
    base_cap_amount = 1
    category = research

    potential = {
        is_colonizeable_planet = yes
        has_major_upgraded_capital = yes
    }

    show_tech_unlock_if = {
        OR = {
            is_regular_empire = yes
            is_machine_empire = yes
            is_hive_empire = yes
        }
    }

    allow = {
        is_sovereign_colony = yes
    }

    resources = {
        category = planet_buildings
        cost = {
            minerals = 1000
            energy = 1000
            alloys = 500
        }
        upkeep = {
            energy = 6
            minerals = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    NOT = {
                        has_deficit = energy
                        has_deficit = minerals
                    }
                }
            }
            engineering_research = 2
            physics_research = 2
        }
    }

    planet_modifier = {
        planet_researchers_produces_mult = 0.2
    }

    country_modifier = {
        country_influence_produces_mult = 0.05
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire = no
            }
        }
        modifier = {
            job_astronomer_add = 4
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = no
                is_fallen_empire = no
            }
        }
        text = "job_astronomer_effect_desc"
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        modifier = {
            job_astronomer_drone_add = 4
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_gestalt = yes
            }
        }
        text = "job_astronomer_drone_effect_desc"
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        modifier = {
            job_astronomer_calculator_add = 4
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_machine_empire = yes
            }
        }
        text = "job_astronomer_calculator_effect_desc"
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        modifier = {
            job_astronomer_brain_drone_add = 4
        }
    }

    triggered_desc = {
        trigger = {
            exists = owner
            owner = {
                is_hive_empire = yes
            }
        }
        text = "job_astronomer_brain_drone_effect_desc"
    }

    ai_weight = {
        weight = 2

        modifier = {
            factor = 1.2
            owner = {
                has_ethic = "ethic_materialist"
            }
        }
        modifier = {
            factor = 1.3
            owner = {
                has_ethic = "ethic_fanatic_materialist"
            }
        }
        modifier = {
            factor = 1.5
            owner = {
                has_civic = "civic_technocracy"
            }
        }
        modifier = {
            factor = 0.75
            owner = {
                has_ethic = "ethic_spiritualist"
            }
        }
        modifier = {
            factor = 0.5
            owner = {
                has_ethic = "ethic_fanatic_spiritualist"
            }
        }
        modifier = {
            factor = 0.25
            owner = {
                has_civic = "civic_agrarian_idyll"
            }
        }
        modifier = {
            factor = 1.1
            owner = {
                has_tradition = "tr_discovery_adopt"
            }
        }
        modifier = {
            factor = 1.2
            owner = {
                OR = {
                    has_tradition = "tr_discovery_to_boldly_go"
                    has_tradition = "tr_discovery_science_division"
                }
            }
        }
        modifier = {
            factor = 1.3
            owner = {
                OR = {
                    has_tradition = "tr_discovery_databank_uplinks"
                    has_tradition = "tr_discovery_polytechnic_education"
                }
            }
        }
        modifier = {
            factor = 1.4
            owner = {
                has_tradition = "tr_discovery_faith_in_science"
            }
        }
        modifier = {
            factor = 1.5
            owner = {
                has_tradition = "tr_discovery_finish"
            }
        }
        modifier = {
            factor = 0
            owner = {
                has_monthly_income = {
                    resource = energy
                    value < 7
                }
            }
        }
        modifier = {
            factor = 0
            owner = {
                has_monthly_income = {
                    resource = minerals
                    value < 3
                }
            }
        }
    }

    # prerequisites = {
    #     "tech_deep_space_survey"
    # }
}