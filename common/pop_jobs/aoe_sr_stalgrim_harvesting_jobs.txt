### Stalgrim Harvester Jobs

stalgrim_harvester_worker = {
    category = worker
    condition_string = WORKER_JOB_TRIGGER
    building_icon = "building_stalgrim_factory_5"
    clothes_texture_index = 2

    possible = {
        worker_job_check_trigger = yes
        hidden_trigger = { exists = owner }
        owner = {
            is_gestalt = no
            is_fallen_empire = no
        }
    }

    resources = {
        category = planet_miners
        produces = {
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_1"
                }
            }
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_2"
                }
            }
            stalgrim = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_3"
                }
            }
            stalgrim = 3
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_4"
                }
            }
            stalgrim = 4
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_5"
                }
            }
            stalgrim = 5
        }
    }

    weight = {
        weight = @worker_job_weight

        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 10
            is_enslaved = yes
            can_take_servant_job = no
        }
        modifier = {
            factor = 2
            OR = {
                is_non_sapient_robot = yes
                is_shackled_robot = yes
            }
            can_take_servant_job = no
            owner = {
                has_technology = "tech_droid_workers"
            }
        }
        modifier = {
            factor = 10
            OR = {
                is_non_sapient_robot = yes
                is_shackled_robot = yes
            }
            can_take_servant_job = no
            owner = {
                NOT = {
                    has_technology = "tech_droid_workers"
                }
            }
        }
        modifier = {
            factor = 1.3
            has_trait = "trait_industrious"
        }
        modifier = {
            factor = 1.2
            has_trait = "trait_very_strong"
        }
        modifier = {
            factor = 1.1
            has_trait = "trait_strong"
        }
        modifier = {
            factor = 0.9
            has_trait = "trait_weak"
        }
        modifier = {
            factor = 0.25
            has_trait = "trait_agrarian"
        }
        modifier = {
            factor = 0.75
            planet = {
                OR = {
                    has_orbital_bombardment = yes
                    has_ground_combat = yes
                }
            }
        }
        modifier = {
            factor = 0.01
            is_pop_purged = yes
        }
        modifier = {
            factor = 0.01
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }
}

stalgrim_harvester_drone = {
    category = complex_drone
    condition_string = DRONE_JOB_TRIGGER
    building_icon = "building_stalgrim_factory_5"

    possible = {
        drone_job_check_trigger = yes
        hidden_trigger = { exists = owner }
        owner = {
            is_gestalt = yes
        }
    }

    resources = {
        category = planet_miners
        produces = {
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_1"
                }
            }
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_2"
                }
            }
            stalgrim = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_3"
                }
            }
            stalgrim = 3
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_4"
                }
            }
            stalgrim = 4
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_5"
                }
            }
            stalgrim = 5
        }
    }

    weight = {
        weight = @complex_drone_job_weight

        modifier = {
            factor = 0.9
            exists = owner
            years_passed < 1
            owner = { has_valid_civic = "civic_machine_assimilator" }
            has_trait = "trait_cybernetic"
        }
        modifier = {
            factor = 0.01
            planet = {
                OR = {
                    has_orbital_bombardment = yes
                    has_ground_combat = yes
                }
            }
        }
        modifier = {
            factor = 0.01
            is_pop_purged = yes
        }
        modifier = {
            factor = 0.01
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }
}

stalgrim_harvester_calculator = {
    category = complex_drone
    condition_string = DRONE_JOB_TRIGGER
    building_icon = "building_stalgrim_factory_5"

    possible = {
        drone_job_check_trigger = yes
        hidden_trigger = { exists = owner }
        owner = {
            is_machine_empire = yes
        }
    }

    resources = {
        category = planet_miners
        produces = {
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_1"
                }
            }
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_2"
                }
            }
            stalgrim = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_3"
                }
            }
            stalgrim = 3
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_4"
                }
            }
            stalgrim = 4
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_5"
                }
            }
            stalgrim = 5
        }
    }

    weight = {
        weight = @complex_drone_job_weight

        modifier = {
            factor = 0.9
            exists = owner
            years_passed < 1
            owner = { has_valid_civic = "civic_machine_assimilator" }
            has_trait = "trait_cybernetic"
        }
        modifier = {
            factor = 0.01
            planet = {
                OR = {
                    has_orbital_bombardment = yes
                    has_ground_combat = yes
                }
            }
        }
        modifier = {
            factor = 0.01
            is_pop_purged = yes
        }
        modifier = {
            factor = 0.01
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }
}

stalgrim_harvester_brain_drone = {
    category = complex_drone
    condition_string = DRONE_JOB_TRIGGER
    building_icon = "building_stalgrim_factory_5"

    possible = {
        drone_job_check_trigger = yes
        hidden_trigger = { exists = owner }
        owner = {
            is_hive_empire = yes
        }
    }

    resources = {
        category = planet_miners
        produces = {
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_1"
                }
            }
            stalgrim = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_2"
                }
            }
            stalgrim = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_3"
                }
            }
            stalgrim = 3
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_4"
                }
            }
            stalgrim = 4
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_technology = "tech_stalgrim_mining_5"
                }
            }
            stalgrim = 5
        }
    }

    weight = {
        weight = @complex_drone_job_weight

        modifier = {
            factor = 0.9
            exists = owner
            years_passed < 1
            owner = { has_valid_civic = "civic_machine_assimilator" }
            has_trait = "trait_cybernetic"
        }
        modifier = {
            factor = 0.01
            planet = {
                OR = {
                    has_orbital_bombardment = yes
                    has_ground_combat = yes
                }
            }
        }
        modifier = {
            factor = 0.01
            is_pop_purged = yes
        }
        modifier = {
            factor = 0.01
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
        }
    }
}