namespace = aoe_ship_actions

ship_event = {
    id = aoe_ship_actions.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        is_ship_size = "corvette"
    }

    immediate = {
        owner = {
            if = {
                limit = {
                    check_variable = {
                        which = "counter_ship_corvettes_built"
                        value < 1
                    }
                }
                set_variable = {
                    which = "counter_ship_corvettes_built"
                    value = 1
                }
                else = {
                    change_variable = {
                        which = "counter_ship_corvettes_built"
                        value = 1
                    }
                }
            }
        }
    }
}

ship_event = {
    id = aoe_ship_actions.10
    title = aoe_ship_actions.10.title
    desc = aoe_ship_actions.10.desc
    picture = GFX_aoe_strategic_resources_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    option = {
        name = aoe_ship_actions.10.a
        custom_tooltip = aoe_ship_actions.10.a.tooltip
        trigger = {
            owner = {
                has_technology = "tech_mine_mithril"
            }
            from = {
                has_mithril_resource = yes
            }
        }
        owner = {
            add_resource = {
                mithril = @tier2materialmax
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.b
        custom_tooltip = aoe_ship_actions.10.b.tooltip
        trigger = {
            owner = {
                NOT = {
                    has_technology = "tech_mine_mithril"
                    has_special_project = "strategic_resources_anomaly_project"
                }
            }
            from = {
                has_mithril_resource = yes
            }
        }
        hidden_effect = {
            from = {
                enable_special_project = {
                    name = "strategic_resources_anomaly_project"
                    location = this
                    owner = root.owner
                }
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.c
        custom_tooltip = aoe_ship_actions.10.c.tooltip
        trigger = {
            owner = {
                has_technology = "tech_mine_orihalk"
            }
            from = {
                has_orihalk_resource = yes
            }
        }
        owner = {
            add_resource = {
                orihalk = @tier2materialmax
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.d
        custom_tooltip = aoe_ship_actions.10.d.tooltip
        trigger = {
            owner = {
                NOT = {
                    has_technology = "tech_mine_orihalk"
                    has_special_project = "strategic_resources_anomaly_project"
                }
            }
            from = {
                has_orihalk_resource = yes
            }
        }
        hidden_effect = {
            from = {
                enable_special_project = {
                    name = "strategic_resources_anomaly_project"
                    location = this
                    owner = root.owner
                }
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.e
        custom_tooltip = aoe_ship_actions.10.e.tooltip
        trigger = {
            owner = {
                has_technology = "tech_mine_yuranic"
            }
            from = {
                has_yuranic_resource = yes
            }
        }
        owner = {
            add_resource = {
                yuranic = @tier2materialmax
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.f
        custom_tooltip = aoe_ship_actions.10.f.tooltip
        trigger = {
            owner = {
                NOT = {
                    has_technology = "tech_mine_yuranic"
                    has_special_project = "strategic_resources_anomaly_project"
                }
            }
            from = {
                has_yuranic_resource = yes
            }
        }
        hidden_effect = {
            from = {
                enable_special_project = {
                    name = "strategic_resources_anomaly_project"
                    location = this
                    owner = root.owner
                }
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.g
        custom_tooltip = aoe_ship_actions.10.g.tooltip
        trigger = {
            owner = {
                has_technology = "tech_mine_itildeen"
            }
            from = {
                has_itildeen_resource = yes
            }
        }
        owner = {
            add_resource = {
                itildeen = @tier2materialmax
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.h
        custom_tooltip = aoe_ship_actions.10.h.tooltip
        trigger = {
            owner = {
                NOT = {
                    has_technology = "tech_mine_itildeen"
                    has_special_project = "strategic_resources_anomaly_project"
                }
            }
            from = {
                has_itildeen_resource = yes
            }
        }
        hidden_effect = {
            from = {
                enable_special_project = {
                    name = "strategic_resources_anomaly_project"
                    location = this
                    owner = root.owner
                }
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.i
        custom_tooltip = aoe_ship_actions.10.i.tooltip
        trigger = {
            owner = {
                has_technology = "tech_mine_satramene"
            }
            from = {
                has_satramene_resource = yes
            }
        }
        owner = {
            add_resource = {
                satramene = @tier2materialmax
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.j
        custom_tooltip = aoe_ship_actions.10.j.tooltip
        trigger = {
            owner = {
                NOT = {
                    has_technology = "tech_mine_satramene"
                    has_special_project = "strategic_resources_anomaly_project"
                }
            }
            from = {
                has_satramene_resource = yes
            }
        }
        hidden_effect = {
            from = {
                enable_special_project = {
                    name = "strategic_resources_anomaly_project"
                    location = this
                    owner = root.owner
                }
            }
        }
    }
    option = {
        name = aoe_ship_actions.10.z
        custom_tooltip = aoe_ship_actions.10.z.tooltip
        hidden_effect = {
            leader = {
                add_experience = 200
            }
        }
    }
}